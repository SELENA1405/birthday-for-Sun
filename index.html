<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday üíô</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
<style>
:root {
  --bg1: #dff1ff;
  --bg2: #b6d9f7;
  --card: rgba(255,255,255,0.55);
  --border: rgba(255,255,255,0.4);
  --accent: #7ec8e3;
  --text: #1e3a5f;
  --muted: #5a7897;
  --shadow: 0 10px 25px rgba(90,120,151,0.15);
}

body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: var(--text);
  overflow-x: hidden;
}

.container {
  width: min(900px, 95%);
  background: var(--card);
  backdrop-filter: blur(14px);
  border: 1px solid var(--border);
  border-radius: 24px;
  padding: 36px 32px;
  box-shadow: var(--shadow);
  text-align: center;
  position: relative;
  overflow: hidden;
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

h1 {
  font-family: 'Dancing Script', cursive;
  font-size: 2.2rem;
  color: var(--accent);
  margin: 0 0 4px;
}

p.lead {
  margin: 0 0 22px;
  color: var(--muted);
  font-size: 0.95rem;
}

.poem {
  font-family: 'Poppins', sans-serif;
  font-size: 1.15rem;
  line-height: 1.6;
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin: 20px 0;
}

.line {
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.5s ease;
}
.line.visible {
  opacity: 1;
  transform: translateY(0);
}

button {
  margin: 10px 8px;
  padding: 10px 20px;
  border-radius: 20px;
  border: none;
  background: var(--accent);
  color: white;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(126,200,227,0.4);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(126,200,227,0.6);
}

.final-banner {
  margin-top: 24px;
  padding: 16px;
  border-radius: 20px;
  background: rgba(255,255,255,0.3);
  color: var(--text);
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.final-banner h2 {
  font-family: 'Dancing Script', cursive;
  font-size: 1.8rem;
  color: #6cb5e0;
  margin: 0;
}
.final-banner p {
  margin: 0;
  color: var(--muted);
  font-size: 0.95rem;
}

.confetti {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.color-options {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 12px;
}
.color-btn {
  width: 22px; height: 22px;
  border-radius: 50%;
  border: 2px solid white;
  cursor: pointer;
}
</style>
</head>
<body>
<div class="container">
  <canvas class="confetti" id="confetti"></canvas>

  <h1>For My Love üíô</h1>
  <p class="lead">A little poem from my heart ‚Äî click ‚ÄúStart‚Äù to read it slowly ‚ú®</p>

  <div class="poem" id="poem"></div>

  <button id="startBtn">Start</button>
  <button id="replayBtn">Replay</button>
  <button id="clearBtn">Clear</button>

  <div class="color-options">
    <div class="color-btn" style="background:#b6d9f7" data-theme="blue"></div>
    <div class="color-btn" style="background:#f7d9e3" data-theme="pink"></div>
    <div class="color-btn" style="background:#e7e1ff" data-theme="purple"></div>
    <div class="color-btn" style="background:#fdf2d0" data-theme="peach"></div>
  </div>

  <div class="final-banner" id="final">
    <h2>Happy Birthday, my precious üíñ</h2>
    <p>May your heart always smile.</p>
  </div>
</div>

<script>
// üíô Poem lines
const poemLines = [
  "Two thousand five, eleventh of November,",
  "My happiness was born.",
  "A man who shines with his love and character,",
  "Cleared the sky filled with storm.",
  "He came into my life and became my lover,",
  "Loved my heart once torn.",
  "",
  "I thank God every day for giving me,",
  "The gentle and sweet you.",
  "Thank you for cherishing and caring for me ‚Äî",
  "Forever, I‚Äôll love you.",
  "",
  "Happy Birthday to you, my precious Hubby.",
  "May all your dreams come true! üíô"
];

const poemDiv = document.getElementById('poem');
const startBtn = document.getElementById('startBtn');
const replayBtn = document.getElementById('replayBtn');
const clearBtn = document.getElementById('clearBtn');
const finalBanner = document.getElementById('final');
const confettiCanvas = document.getElementById('confetti');
const ctx = confettiCanvas.getContext('2d');
let confettiPieces = [];
let confettiActive = false;

// üéµ Background music (upload your mp3 in Replit and change the name below)
const music = new Audio("happy-birthday-to-you-piano-version-13976.mp3");
music.volume = 0.4;

function wait(ms){ return new Promise(res => setTimeout(res, ms)); }

async function showPoem(){
  clearEverything(false); // clear but keep music going
  for(const line of poemLines){
    const el = document.createElement('div');
    el.className = 'line';
    el.textContent = line;
    poemDiv.appendChild(el);
    await wait(2500);
    el.classList.add('visible');
  }

  finalBanner.style.display = "flex";
  startConfetti();

  // üå∏ Fade out music at the end
  setTimeout(() => {
    const fade = setInterval(() => {
      if (music.volume > 0.05) {
        music.volume -= 0.05;
      } else {
        clearInterval(fade);
        music.pause();
        music.volume = 0.4;
      }
    }, 300);
  }, 9000);

  // stop confetti after it falls
  setTimeout(() => stopConfetti(), 8000);
}

// ‚èØÔ∏è Start button triggers music + poem
startBtn.onclick = async () => {
  clearEverything(false); // clears screen but keeps music ready
  music.currentTime = 0; // reset to start
  try {
    await music.play(); // start music on this click
  } catch(err) {
    console.log("Music blocked by browser until user clicks");
  }
  await showPoem(); // show the poem and confetti
};

// üîÅ Replay button
replayBtn.onclick = async () => {
  clearEverything();
  music.currentTime = 0;
  music.play();
  await showPoem();
};

// üßπ Clear button
clearBtn.onclick = () => clearEverything();

// üéä Confetti
const colors = ['#a3d5f7','#ffd6e8','#d8bfff','#fff0c2','#b4f0cb'];
function resizeCanvas(){
  confettiCanvas.width = confettiCanvas.offsetWidth;
  confettiCanvas.height = confettiCanvas.offsetHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

function startConfetti(){
  confettiPieces = [];
  for(let i=0;i<90;i++){
    confettiPieces.push({
      x: Math.random()*confettiCanvas.width,
      y: Math.random()*confettiCanvas.height - confettiCanvas.height,
      r: Math.random()*6+4,
      color: colors[Math.floor(Math.random()*colors.length)],
      vy: Math.random()*2+1
    });
  }
  confettiActive = true;
  animateConfetti();
}
function stopConfetti(){
  confettiActive = false;
  ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
}
function animateConfetti(){
  if(!confettiActive) return;
  ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  for(const p of confettiPieces){
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();
    p.y += p.vy;
    if(p.y>confettiCanvas.height){p.y= -10;}
  }
  requestAnimationFrame(animateConfetti);
}

// üßπ Clear function
function clearEverything(stopMusic=true){
  poemDiv.innerHTML = "";
  finalBanner.style.display = "none";
  stopConfetti();
  if(stopMusic){
    music.pause();
    music.currentTime = 0;
    music.volume = 0.4;
  }
}

// üåà Theme switcher
document.querySelectorAll('.color-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const theme = btn.dataset.theme;
    if(theme==='blue'){ document.documentElement.style.setProperty('--bg1','#dff1ff'); document.documentElement.style.setProperty('--accent','#7ec8e3'); }
    if(theme==='pink'){ document.documentElement.style.setProperty('--bg1','#ffe6f1'); document.documentElement.style.setProperty('--accent','#f7a1c4'); }
    if(theme==='purple'){ document.documentElement.style.setProperty('--bg1','#eee8ff'); document.documentElement.style.setProperty('--accent','#c4a1f7'); }
    if(theme==='peach'){ document.documentElement.style.setProperty('--bg1','#fff4da'); document.documentElement.style.setProperty('--accent','#f7c78d'); }
  });
});
</script>
</body>
</html>
